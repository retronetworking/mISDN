# 
# local Rules for 2.4
#

O_TARGET := vmlinux-obj.o

export-objs := core.o isac.o

ifdef CONFIG_MISDN_MEMDEBUG
	export-objs += memdbg.o
endif

M_OBJS := $(obj-m)

include $(TOPDIR)/Rules.make

mISDN_core.o: $(mISDN_core-objs)
	$(RM) $@
	$(LD) -r -o $@ $(filter-out $(MODVERFILE) dummy ,$^)

mISDN_isac.o: $(mISDN_isac-objs)
	$(RM) $@
	$(LD) -r -o $@ $(filter-out $(MODVERFILE) dummy ,$^)

avmfritz.o: $(avmfritz-objs)
	$(RM) $@
	$(LD) -r -o $@ $(filter-out $(MODVERFILE) dummy ,$^)

sedlfax.o: $(sedlfax-objs)
	$(RM) $@
	$(LD) -r -o $@ $(filter-out $(MODVERFILE) dummy ,$^)

w6692pci.o: $(w6692pci-objs)
	$(RM) $@
	$(LD) -r -o $@ $(filter-out $(MODVERFILE) dummy ,$^)

hfcpci.o: $(hfcpci-objs)
	$(RM) $@
	$(LD) -r -o $@ $(filter-out $(MODVERFILE) dummy ,$^)

mISDN_l1.o: $(mISDN_l1-objs)
	$(RM) $@
	$(LD) -r -o $@ $(filter-out $(MODVERFILE) dummy ,$^)

mISDN_l2.o: $(mISDN_l2-objs)
	$(RM) $@
	$(LD) -r -o $@ $(filter-out $(MODVERFILE) dummy ,$^)

mISDN_x25dte.o: $(mISDN_x25dte-objs)
	$(RM) $@
	$(LD) -r -o $@ $(filter-out $(MODVERFILE) dummy ,$^)

l3udss1.o: $(l3udss1-objs)
	$(RM) $@
	$(LD) -r -o $@ $(filter-out $(MODVERFILE) dummy ,$^)

mISDN_capi.o: $(mISDN_capi-objs)
	$(RM) $@
	$(LD) -r -o $@ $(filter-out $(MODVERFILE) dummy ,$^)

mISDN_dtmf.o: $(mISDN_dtmf-objs)
	$(RM) $@
	$(LD) -r -o $@ $(filter-out $(MODVERFILE) dummy ,$^)

ifdef CONFIG_I4L_CAPI_LAYER
I4LmISDN.o: $(I4LmISDN-objs)
	$(RM) $@
	$(LD) -r -o $@ $(filter-out $(MODVERFILE) dummy ,$^)

endif

mISDN_dsp.o: $(mISDN_dsp-objs)
	$(RM) $@
	$(LD) -r -o $@ $(filter-out $(MODVERFILE) dummy ,$^)
